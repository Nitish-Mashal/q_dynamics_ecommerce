{% extends "templates/web.html" %}
{% block page_content %}

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Inter', sans-serif;
        background: #f6f8fb;
    }

    /* Grid fix */
    .row {
        display: flex;
        flex-wrap: wrap;
    }

    .col-lg-4,
    .col-md-6 {
        display: flex;
    }

    /* Card */
    .blog-card {
        border-radius: 14px;
        overflow: hidden;
        border: none;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        background: #fff;
        width: 100%;
        display: flex;
        flex-direction: column;
    }

    /* Header */
    .blog-header {
        background: #00a79d;
        padding: 20px;
        position: relative;
        min-height: 190px;
    }

    /* Image */
    .blog-img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        position: absolute;
        top: 20px;
        right: 20px;
        border: 4px solid #fff;
        background: #fff;
    }

    /* Header text */
    .blog-header h5 {
        color: #eafffd;
        font-size: 16px;
        font-weight: 500;
        margin-bottom: 8px;
        max-width: 180px;
    }

    .blog-header p {
        color: #eafffd;
        font-size: 13px;
        line-height: 1.6;
        max-width: 180px;
    }

    /* Body */
    .blog-body {
        padding: 20px;
        flex-grow: 1;
    }

    .blog-body h5 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 10px;
        color: #111;
    }

    .blog-body p {
        font-size: 14px !important;
        color: #666;
        line-height: 1.6;
    }

    /* Read more */
    .read-more {
        font-size: 13px;
        font-weight: 500;
        color: #00a79d !important;
        text-decoration: none;
    }

    .read-more:hover {
        text-decoration: underline;
    }

    /* Footer */
    .blog-footer {
        border-top: 1px solid #eee;
        padding: 12px 20px;
        font-size: 12px;
        color: #999;
        margin-top: auto;
    }
</style>

<div class="py-5">
    <div class="row g-4" id="blog-container">
        <!-- Cards injected here -->
    </div>
</div>

<script>
    fetch("/api/method/q_dynamics_ecommerce.api.blogs.get_blogs")
        .then(res => res.json())
        .then(res => {
            const blogs = res.message || [];
            const container = document.getElementById("blog-container");

            blogs.forEach(blog => {
                const image = blog.thumbnail_image || blog.header_image || "";

                const cardHTML = `
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="blog-card">
                        <div class="blog-header">
                            <h5>${blog.description_heading_1_h3 || ""}</h5>
                            <p>${blog.sub_description_heading_1_p || ""}</p>
                            <img src="${image}" class="blog-img" alt="Blog Image">
                        </div>

                        <div class="blog-body">
                            <h5>${blog.description_heading_2 || ""}</h5>

                            <div style="font-size:14px">
                                ${blog.description_1 || ""}
                            </div>

                            
                            <a href="/sections/blogdetails?blog_name=${encodeURIComponent(blog.name)}"

                               class="read-more  fw-semibold">
                                Read More â†’
                            </a>
                        </div>

                        <div class="blog-footer">
                            ${formatDate(blog.blog_date)}
                        </div>
                    </div>
                </div>
                `;

                container.insertAdjacentHTML("beforeend", cardHTML);
            });
        })
        .catch(err => console.error("Blog API error:", err));

    function formatDate(dateStr) {
        if (!dateStr) return "";
        const date = new Date(dateStr);
        return date.toLocaleDateString("en-IN", {
            day: "numeric",
            month: "long",
            year: "numeric"
        });
    }
</script>

{% endblock %}